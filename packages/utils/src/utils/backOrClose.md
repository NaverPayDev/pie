# backOrClose

`backOrClose`는 현재페이지에서 이전페이지가 있다면 뒤로가고, 이전 페이지가 없다면 현재창을 닫는 유틸함수입니다.  
웹브라우저에서 완벽하게 위 조건을 확인할 수 있는 방법이 없기 때문에 , `popstate` 이벤트와 타이머를 사용하여 구현합니다.

## 사용 예제

```typescript
const userAgentValues = generateUserAgentValues(window.navigator.userAgent)

backOrClose(userAgentValues)
```

## 참고사항

테스트를 통해 환경별로 `window.close`, `history.back`, `naverapp://closewindow` 를 실행해본 결과입니다.
`window.open` 을 실행하면 새탭을 열게 되고, 탭 히스토리와 페이지 히스토리(`history.length`)를 구분해서 읽어야합니다.

|              | window.close                                                                             | history.back                                                            | naverapp://closewindow           |
| ------------ | ---------------------------------------------------------------------------------------- | ----------------------------------------------------------------------- | -------------------------------- |
| naverapp ios | 탭히스토리가 2이상일때만 현재탭을 닫음. 탭히스토리가1이면 아무동작하지 않음              | 탭히스토리 상관없이 뒤로갈 페이지있으면 뒤로, 없으면 현재탭닫힘         | 탭히스토리 상관없이 현재탭닫힘   |
| naverapp aos | 탭히스토리가 2이상일때만 현재탭을 닫음. 탭히스토리가1이면 아무동작하지 않음              | 탭히스토리 상관없이 뒤로갈 페이지있으면 뒤로, 없으면 현재탭닫힘         | 탭히스토리 상관없이 현재탭닫힘   |
| payapp ios   | 탭히스토리 상관없이 현재탭을 닫음                                                        | 탭히스토리 상관없이 뒤로갈 페이지있으면 뒤로, 없으면 현재탭닫힘         | 탭히스토리 상관없이 `전체`탭닫힘 |
| payapp aos   | 탭히스토리 상관없이 history.length 가 1일때만 현재탭을 닫음. 2이상이면 아무동작하지 않음 | 탭히스토리 상관없이 뒤로갈 페이지 있으면 뒤로, 없으면 아무동작하지 않음 | 탭히스토리 상관없이 현재탭닫힘   |
